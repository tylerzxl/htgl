(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{2433:function(e,t,a){"use strict";a.r(t);var n,o,i,r=a(191),c=(n=function(e,t,a,n,o){var i=cb.rest.DynamicProxy.create({getData:{url:"/option.do/"+t.getParams().subId,method:"GET",options:{uniform:!1}}}),c={orgId:t.get("selectOrg")&&t.get("selectOrg").getValue(),subid:t.getParams().subid,optionId:t.getParams().optionId};n({params:a,data:c},(function(){i.getData(c,(function(e,a){e||(t.get("selectOrg")&&(a.selectOrg=t.get("selectOrg").getValue()),t.get("selectOrg_name")&&(a.selectOrg_name=t.get("selectOrg_name").getValue()),t.setReadOnly(!1),t.loadData(a)),o({err:e,res:a},r.a)}))}))},o=function(e,t,a,n,o){var i=t.collectData();if(i){var c=[];for(var l in i)c.push({name:l,value:i[l],optionId:t.getParams().optionId});if(void 0===t.get("selectOrg")||t.get("selectOrg").getValue()){var s={orgId:t.get("selectOrg")&&t.get("selectOrg").getValue(),data:c};n({params:a,data:s},(function(){r.p(a,(function(e,a){var n=a;if(!e){cb.utils.alert("保存成功");var i=t.collectData(!0);n=Object.assign({},i,a),t.loadData(n)}o({err:e,res:n},r.a)}),s)}))}else cb.utils.alert("请选择组织！","error")}else cb.utils.alert("未作任何修改")},i=function(e,t,a,n,o){var i=t.collectData();n({params:a},(function(){i?cb.utils.confirm("确定要放弃么",(function(){var e={res:t.getOriginalData()};t.loadData(t.getOriginalData()),o(e,r.a)}),(function(e){e(),o({res:i},r.a)})):o(t.getOriginalData(),r.a)}))},{init:function(e,t,a){var n=this,o=cb.rest.DynamicProxy.create({getMeta:{url:"/meta",method:"POST",options:{uniform:!1}}}),i=Object.assign({},t,{type:"option",optionId:e});o.getMeta(i,(function(o,i){if(o)return cb.utils.alert(JSON.stringify(o),"error"),console.error(o),void cb.utils.loadingControl.end();cb.requireInner(i.vmurl,(function(){var o={optionId:e,billNo:i.viewmeta.cBillNo,subId:i.viewmeta.cSubId,foreignKey:i.viewmeta.foreignKey};!i.vmurl&&i.vm&&new Function(i.vm)();var c=new cb.viewmodels[i.viewmeta.vmName];c.setViewMeta(i.viewmeta),cb.utils.extend(!0,c.getParams(),o,t),r.J(e,c),c.on("extendReady",(function(){a(c,i.viewmeta,i.viewmeta.cName)})),c.initData(),c.get("selectOrg_name")&&c.get("selectOrg_name").on("afterValueChange",(function(){n.do("load",c)})),window.yya=c,n.do("load",c)}))}))},do:function(e,t,a){r.K(this,e,t,a)},action:function(){var e={};try{e=cb.extendConfig.optionExtendConfig}catch(t){console.log(t),e={}}var t={load:n,save:o,abandon:i};return Object.assign(t,e)}});cb.namespace("biz.common"),cb.biz.common.option=c,t.default=c}}]);
//# sourceMappingURL=9.bundle.js.map?_=d566ad53-de75-49ba-965f-44adb4dd2a09